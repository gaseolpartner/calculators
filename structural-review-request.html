<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HJêµ¬ì¡°ì‚¬ë¬´ì‹¤ êµ¬ì¡°ê²€í†  ì˜ë¢°ì„œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 28px;
            padding: 15px;
            background-color: #ecf0f1;
            border-radius: 5px;
        }
        
        .section {
            margin-bottom: 25px;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        
        .form-group {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .form-group label {
            width: 120px;
            font-weight: bold;
            color: #555;
            flex-shrink: 0;
        }
        
        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="date"],
        .form-group input[type="number"],
        .form-group select {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group input[type="text"]:focus,
        .form-group input[type="email"]:focus,
        .form-group input[type="tel"]:focus,
        .form-group input[type="date"]:focus,
        .form-group input[type="number"]:focus,
        .form-group select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
        }
        
        .inline-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .inline-group .form-group {
            flex: 1;
            min-width: 250px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        table th {
            background-color: #34495e;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        
        table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        table input[type="text"],
        table input[type="number"] {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
            text-align: center;
        }
        
        .checkbox-group {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .add-row-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
        }
        
        .add-row-btn:hover {
            background-color: #2980b9;
        }
        
        .submit-section {
            text-align: center;
            margin-top: 30px;
        }
        
        .submit-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        
        .submit-btn:hover {
            background-color: #229954;
        }
        
        .print-btn {
            background-color: #95a5a6;
            color: white;
            border: none;
            padding: 12px 40px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .print-btn:hover {
            background-color: #7f8c8d;
        }
        
        @media print {
            body {
                background-color: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 20px;
            }
            
            .add-row-btn,
            .submit-section {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>HJêµ¬ì¡°ì‚¬ë¬´ì‹¤ êµ¬ì¡°ê²€í†  ì˜ë¢°ì„œ</h1>
        
        <!-- ìˆ˜ì‹ /ë°œì‹  ì •ë³´ -->
        <div class="section">
            <div class="section-title">ìˆ˜ì‹ /ë°œì‹  ì •ë³´</div>
            <div class="inline-group">
                <div class="form-group">
                    <label>ìˆ˜ì‹ ì²˜:</label>
                    <input type="text" name="recipient" value="HJêµ¬ì¡°ì‚¬ë¬´ì‹¤" readonly style="background-color: #f0f0f0;">
                </div>
                <div class="form-group">
                    <label>ë©”ì¼:</label>
                    <input type="email" name="email" value="hj_str@naver.com" readonly style="background-color: #f0f0f0;">
                </div>
            </div>
            <div class="inline-group">
                <div class="form-group">
                    <label>ì—°ë½ì²˜:</label>
                    <input type="tel" name="tel" value="010-7970-2108" readonly style="background-color: #f0f0f0;">
                </div>
            </div>
            <div class="inline-group">
                <div class="form-group">
                    <label>ë°œì‹ ì²˜:</label>
                    <input type="text" name="sender" placeholder="ì˜ë¢° íšŒì‚¬ëª…" required>
                </div>
                <div class="form-group">
                    <label>ì˜ì—…ë‹´ë‹¹:</label>
                    <input type="text" name="sales" placeholder="ë‹´ë‹¹ìëª…" required>
                </div>
            </div>
            <div class="inline-group">
                <div class="form-group">
                    <label>H.P:</label>
                    <input type="tel" name="mobile" placeholder="010-0000-0000" required>
                </div>
                <div class="form-group">
                    <label>ì ‘ìˆ˜ë‚ ì§œ:</label>
                    <input type="date" name="receiveDate" required>
                </div>
                <div class="form-group">
                    <label>í¬ë§ë‚ ì§œ:</label>
                    <input type="date" name="hopeDate" required>
                </div>
            </div>
        </div>
        
        <!-- í”„ë¡œì íŠ¸ ì •ë³´ -->
        <div class="section">
            <div class="section-title">í”„ë¡œì íŠ¸ ì •ë³´</div>
            <div class="form-group">
                <label>ì—…ì²´ëª…:</label>
                <input type="text" name="company" placeholder="ì˜ˆ: XXê±´ì„¤" required>
            </div>
            <div class="form-group">
                <label>í˜„ì¥ëª…:</label>
                <input type="text" name="site" placeholder="ì˜ˆ: ì²­ì£¼ ì§€ì›ê´€ ì‹ ì¶•ê³µì‚¬" required>
            </div>
            <div class="form-group">
                <label>ê²€í† êµ¬ë¶„:</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="dongbari" name="reviewType" value="ë™ë°”ë¦¬">
                        <label for="dongbari">ì‹œìŠ¤í…œë™ë°”ë¦¬</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="bigye" name="reviewType" value="ë¹„ê³„">
                        <label for="bigye">ì‹œìŠ¤í…œë¹„ê³„</label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ì‹œìŠ¤í…œë™ë°”ë¦¬ ê²€í†  -->
        <div class="section" id="dongbariSection">
            <div class="section-title">ì‹œìŠ¤í…œë™ë°”ë¦¬ ê²€í† ë‚´ìš©</div>
            
            <!-- ìŠ¬ë¼ë¸Œ -->
            <div style="margin-bottom: 20px;">
                <h4 style="margin-bottom: 10px; color: #34495e;">ìŠ¬ë¼ë¸Œ</h4>
                <table id="slabTable">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„ëª…</th>
                            <th>ë‘ê»˜(mm)</th>
                            <th>ì‹œìŠ¤í…œ ì„¤ê³„ë°°ì¹˜</th>
                            <th>ë¹„ê³ </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="êµ¬ê°„ëª… ì…ë ¥"></td>
                            <td><input type="number" placeholder="150"></td>
                            <td><input type="text" placeholder="1829 x 1219"></td>
                            <td><input type="text" placeholder="ë¹„ê³ ì‚¬í•­"></td>
                        </tr>
                    </tbody>
                </table>
                <button class="add-row-btn" onclick="addRow('slabTable')">í–‰ ì¶”ê°€</button>
            </div>
            
            <!-- ë³´ -->
            <div>
                <h4 style="margin-bottom: 10px; color: #34495e;">ë³´ (ë©ì— ë‹¨ë°©í–¥)</h4>
                <table id="beamTable">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„ëª…</th>
                            <th>ë³´í­(mm)</th>
                            <th>ë³´ë‘ê»˜(mm)</th>
                            <th>ì‹œìŠ¤í…œ ì„¤ê³„ë°°ì¹˜</th>
                            <th>ë¹„ê³ </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="êµ¬ê°„ëª… ì…ë ¥"></td>
                            <td><input type="number" placeholder="400"></td>
                            <td><input type="number" placeholder="500"></td>
                            <td><input type="text" placeholder="610 x 1219"></td>
                            <td><input type="text" placeholder="ë¹„ê³ ì‚¬í•­"></td>
                        </tr>
                    </tbody>
                </table>
                <button class="add-row-btn" onclick="addRow('beamTable')">í–‰ ì¶”ê°€</button>
            </div>
        </div>
        
        <!-- ì‹œìŠ¤í…œë¹„ê³„ ê²€í†  -->
        <div class="section" id="bigyeSection" style="display: none;">
            <div class="section-title">ì‹œìŠ¤í…œë¹„ê³„ ê²€í† ë‚´ìš©</div>
            
            <div class="form-group">
                <label>ì‘ì—…êµ¬ë¶„:</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="radio" id="light" name="workType" value="ê²½ì‘ì—…">
                        <label for="light">ê²½ì‘ì—…</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="radio" id="medium" name="workType" value="ì¤‘ì‘ì—…">
                        <label for="medium">ì¤‘ì‘ì—…</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="radio" id="stone" name="workType" value="ì„ì¬ì‘ì—…">
                        <label for="stone">ì„ì¬ì‘ì—…</label>
                    </div>
                </div>
            </div>
            
            <div class="inline-group">
                <div class="form-group">
                    <label>ì„¤ì¹˜ ìµœê³ ë†’ì´:</label>
                    <input type="number" name="maxHeight" placeholder="ë†’ì´ ì…ë ¥" step="0.1">
                    <span style="margin-left: 5px;">m</span>
                </div>
                <div class="form-group">
                    <label>ì„¤ì¹˜ ê¸¸ì´:</label>
                    <input type="number" name="length" placeholder="ê¸¸ì´ ì…ë ¥" step="0.1">
                    <span style="margin-left: 5px;">m</span>
                </div>
            </div>
            
            <div class="form-group">
                <label>ì„¤ì¹˜ ìœ„ì¹˜:</label>
                <input type="text" name="location" placeholder="ì˜ˆ: ê±´ë¬¼ ì™¸ë²½, ë‚´ë¶€ ì²œì¥ ë“±">
            </div>
            
            <div>
                <h4 style="margin-bottom: 10px; color: #34495e;">ë¹„ê³„ ìƒì„¸ë‚´ì—­</h4>
                <table id="scaffoldTable">
                    <thead>
                        <tr>
                            <th>êµ¬ê°„</th>
                            <th>ìˆ˜ì§ì¬ ê°„ê²©(mm)</th>
                            <th>ìˆ˜í‰ì¬ ê°„ê²©(mm)</th>
                            <th>ë ì¥ ê°„ê²©(mm)</th>
                            <th>ë¹„ê³ </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="êµ¬ê°„ëª…"></td>
                            <td><input type="number" placeholder="1800"></td>
                            <td><input type="number" placeholder="1800"></td>
                            <td><input type="number" placeholder="900"></td>
                            <td><input type="text" placeholder="ë¹„ê³ ì‚¬í•­"></td>
                        </tr>
                    </tbody>
                </table>
                <button class="add-row-btn" onclick="addRow('scaffoldTable')">í–‰ ì¶”ê°€</button>
            </div>
        </div>
        
        <!-- ì¶”ê°€ ìš”ì²­ì‚¬í•­ -->
        <div class="section">
            <div class="section-title">ì¶”ê°€ ìš”ì²­ì‚¬í•­</div>
            <textarea style="width: 100%; min-height: 100px; padding: 10px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;" 
                      placeholder="ê¸°íƒ€ ê²€í†  ìš”ì²­ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
            <p class="info-text" style="color: #666; margin-top: 10px; background: #f0f0f0; padding: 10px; border-radius: 5px;">
                <strong>ğŸ’¡ ë‹¤ë¥¸ ê°€ì„¤ì¬ ê²€í†  ì˜ë¢° ì•ˆë‚´</strong><br>
                ì­ì„œí¬íŠ¸, ë¸Œë¼ì¼“, ì‘ì—…ëŒ€, ì•ˆì „ë°œíŒ, ë‚™í•˜ë¬¼ë°©í˜¸ë•íŠ¸ ë“± ê¸°íƒ€ ê°€ì„¤ì¬ ê²€í† ê°€ í•„ìš”í•˜ì‹  ê²½ìš°<br>
                ì´ ì¶”ê°€ìš”ì²­ì‚¬í•­ë€ì— ìƒì„¸ ë‚´ìš©ì„ ì‘ì„±í•´ì£¼ì‹œë©´ ê²€í†  ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
                <span style="color: #ff8800;">ì˜ˆì‹œ: "ì­ì„œí¬íŠ¸ 3.5m ë†’ì´, 2m ê°„ê²© ì„¤ì¹˜ ì‹œ êµ¬ì¡°ê²€í†  ìš”ì²­"</span>
            </p>
        </div>
        
        <!-- ì²¨ë¶€íŒŒì¼ ì„¹ì…˜ -->
        <div class="section">
            <div class="section-title">ì²¨ë¶€íŒŒì¼</div>
            <div class="form-group">
                <label>íŒŒì¼ ì„ íƒ:</label>
                <input type="file" id="attachments" name="attachments" multiple accept=".pdf,.dwg,.jpg,.jpeg,.png,.zip,.rar" style="padding: 10px;">
            </div>
            <p class="info-text" style="color: #ff8800; margin-top: 10px;">
                â€» íŒŒì¼ ìš©ëŸ‰ì´ í´ ê²½ìš°(10MB ì´ìƒ) ì´ë©”ì¼ë¡œ ë³„ë„ ì „ì†¡ ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br>
                â€» ì›ë„ ë„ë©´(DWG, PDF ë“±)ì€ ì •í™•í•œ ê²€í† ë¥¼ ìœ„í•´ ë°˜ë“œì‹œ ì²¨ë¶€í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.<br>
                â€» ì—¬ëŸ¬ íŒŒì¼ ì„ íƒ ê°€ëŠ¥ (Ctrl+í´ë¦­ ë˜ëŠ” Shift+í´ë¦­)
            </p>
            <div id="fileList" style="margin-top: 10px;"></div>
        </div>
        
        <!-- ì œì¶œ ë²„íŠ¼ -->
        <div class="submit-section">
            <button class="submit-btn" onclick="submitForm()">ì˜ë¢°ì„œ ì œì¶œ</button>
            <button class="print-btn" onclick="window.print()">ì¸ì‡„í•˜ê¸°</button>
        </div>
    </div>
    
    <script>
        // ì²´í¬ë°•ìŠ¤ì— ë”°ë¥¸ ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€
        document.getElementById('dongbari').addEventListener('change', function() {
            document.getElementById('dongbariSection').style.display = this.checked ? 'block' : 'none';
        });
        
        document.getElementById('bigye').addEventListener('change', function() {
            document.getElementById('bigyeSection').style.display = this.checked ? 'block' : 'none';
        });
        
        // í…Œì´ë¸” í–‰ ì¶”ê°€ í•¨ìˆ˜
        function addRow(tableId) {
            const table = document.getElementById(tableId);
            const tbody = table.getElementsByTagName('tbody')[0];
            const newRow = tbody.rows[0].cloneNode(true);
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            const inputs = newRow.getElementsByTagName('input');
            for (let input of inputs) {
                input.value = '';
            }
            
            tbody.appendChild(newRow);
        }
        
        // í¼ ì œì¶œ í•¨ìˆ˜
        function submitForm() {
            // í•„ìˆ˜ ì…ë ¥ ê²€ì¦
            const requiredFields = document.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#ddd';
                }
            });
            
            if (!isValid) {
                alert('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ê²€í† êµ¬ë¶„ ì²´í¬ í™•ì¸
            const reviewTypes = document.querySelectorAll('input[name="reviewType"]:checked');
            if (reviewTypes.length === 0) {
                alert('ê²€í† êµ¬ë¶„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // í¼ ë°ì´í„° ìˆ˜ì§‘
            const formData = collectFormData();
            
            // ì œì¶œ ë°©ë²• ì„ íƒ ëª¨ë‹¬ í‘œì‹œ
            showSubmitModal(formData);
        }
        
        // ì œì¶œ ë°©ë²• ì„ íƒ ëª¨ë‹¬
        function showSubmitModal(formData) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 40px; border-radius: 10px; text-align: center; max-width: 600px;">
                    <h2 style="color: #ff8800; margin-bottom: 20px;">HJêµ¬ì¡°ì‚¬ë¬´ì‹¤ ì˜ë¢°ì„œ ì œì¶œ ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”</h2>
                    <p style="color: #666; margin-bottom: 30px;">ì•„ë˜ ë°©ë²• ì¤‘ í¸í•˜ì‹  ë°©ë²•ìœ¼ë¡œ ì˜ë¢°ì„œë¥¼ ì œì¶œí•´ì£¼ì„¸ìš”.</p>
                    
                    <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                        <button onclick="sendEmail(${JSON.stringify(formData).replace(/"/g, '&quot;')})" 
                                style="background: #0066cc; color: white; border: none; padding: 30px 40px; 
                                       border-radius: 10px; cursor: pointer; font-size: 18px; transition: all 0.3s;">
                            <div style="font-size: 30px; margin-bottom: 10px;">âœ‰ï¸</div>
                            ì´ë©”ì¼ë¡œ ë°œì†¡
                            <div style="font-size: 14px; margin-top: 10px;">hj_str@naver.com</div>
                        </button>
                        
                        <button onclick="sendKakaoTalk(${JSON.stringify(formData).replace(/"/g, '&quot;')})" 
                                style="background: #f9e000; color: #3c1e1e; border: none; padding: 30px 40px; 
                                       border-radius: 10px; cursor: pointer; font-size: 18px; transition: all 0.3s;">
                            <div style="font-size: 30px; margin-bottom: 10px;">ğŸ’¬</div>
                            ì˜¤í”ˆì¹´ì¹´ì˜¤í†¡
                            <div style="font-size: 14px; margin-top: 10px;">ì‹¤ì‹œê°„ ìƒë‹´ ê°€ëŠ¥</div>
                        </button>
                        
                        <button onclick="downloadFile(${JSON.stringify(formData).replace(/"/g, '&quot;')})" 
                                style="background: #28a745; color: white; border: none; padding: 30px 40px; 
                                       border-radius: 10px; cursor: pointer; font-size: 18px; transition: all 0.3s;">
                            <div style="font-size: 30px; margin-bottom: 10px;">ğŸ“„</div>
                            íŒŒì¼ ë‹¤ìš´ë¡œë“œ
                            <div style="font-size: 14px; margin-top: 10px;">ì˜ë¢°ì„œ ì €ì¥</div>
                        </button>
                    </div>
                    
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="margin-top: 20px; background: #666; color: white; border: none; 
                                   padding: 10px 30px; border-radius: 5px; cursor: pointer;">
                        ì·¨ì†Œ
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // í¼ ë°ì´í„° ìˆ˜ì§‘ í•¨ìˆ˜
        function collectFormData() {
            const data = {
                ë°œì‹ ì •ë³´: {
                    íšŒì‚¬: document.querySelector('input[name="sender"]').value,
                    ë‹´ë‹¹ì: document.querySelector('input[name="sales"]').value,
                    ì—°ë½ì²˜: document.querySelector('input[name="mobile"]').value,
                    ì ‘ìˆ˜ë‚ ì§œ: document.querySelector('input[name="receiveDate"]').value,
                    í¬ë§ë‚ ì§œ: document.querySelector('input[name="hopeDate"]').value
                },
                í”„ë¡œì íŠ¸ì •ë³´: {
                    ì—…ì²´ëª…: document.querySelector('input[name="company"]').value,
                    í˜„ì¥ëª…: document.querySelector('input[name="site"]').value,
                    ê²€í† êµ¬ë¶„: Array.from(document.querySelectorAll('input[name="reviewType"]:checked')).map(cb => cb.value).join(', ')
                }
            };
            
            // ì‹œìŠ¤í…œë™ë°”ë¦¬ ë°ì´í„° ìˆ˜ì§‘
            if (document.getElementById('dongbari').checked) {
                data.ì‹œìŠ¤í…œë™ë°”ë¦¬ = {
                    ìŠ¬ë¼ë¸Œ: collectTableData('slabTable'),
                    ë³´: collectTableData('beamTable')
                };
            }
            
            // ì‹œìŠ¤í…œë¹„ê³„ ë°ì´í„° ìˆ˜ì§‘
            if (document.getElementById('bigye').checked) {
                const workType = document.querySelector('input[name="workType"]:checked');
                data.ì‹œìŠ¤í…œë¹„ê³„ = {
                    ì‘ì—…êµ¬ë¶„: workType ? workType.value : '',
                    ìµœê³ ë†’ì´: document.querySelector('input[name="maxHeight"]').value + 'm',
                    ì„¤ì¹˜ê¸¸ì´: document.querySelector('input[name="length"]').value + 'm',
                    ì„¤ì¹˜ìœ„ì¹˜: document.querySelector('input[name="location"]').value,
                    ìƒì„¸ë‚´ì—­: collectTableData('scaffoldTable')
                };
            }
            
            // ì¶”ê°€ ìš”ì²­ì‚¬í•­
            const additionalRequest = document.querySelector('textarea').value;
            if (additionalRequest) {
                data.ì¶”ê°€ìš”ì²­ì‚¬í•­ = additionalRequest;
            }
            
            // ì²¨ë¶€íŒŒì¼ ì •ë³´
            const fileInput = document.getElementById('attachments');
            if (fileInput.files.length > 0) {
                data.ì²¨ë¶€íŒŒì¼ = [];
                let totalSize = 0;
                for (let file of fileInput.files) {
                    data.ì²¨ë¶€íŒŒì¼.push({
                        ì´ë¦„: file.name,
                        í¬ê¸°: (file.size / 1024 / 1024).toFixed(2) + 'MB'
                    });
                    totalSize += file.size;
                }
                data.ì´íŒŒì¼í¬ê¸° = (totalSize / 1024 / 1024).toFixed(2) + 'MB';
            }
            
            return data;
        }
        
        // í…Œì´ë¸” ë°ì´í„° ìˆ˜ì§‘ í•¨ìˆ˜
        function collectTableData(tableId) {
            const table = document.getElementById(tableId);
            const rows = table.getElementsByTagName('tbody')[0].rows;
            const data = [];
            
            for (let row of rows) {
                const inputs = row.getElementsByTagName('input');
                const rowData = [];
                for (let input of inputs) {
                    if (input.value.trim()) {
                        rowData.push(input.value);
                    }
                }
                if (rowData.length > 0) {
                    data.push(rowData);
                }
            }
            
            return data;
        }
        
        // ì´ë©”ì¼ ì „ì†¡ í•¨ìˆ˜
        function sendEmail(formData) {
            // ì´ë©”ì¼ ë³¸ë¬¸ ìƒì„±
            const emailBody = generateEmailBody(formData);
            
            // mailto ë§í¬ ìƒì„±
            const subject = encodeURIComponent(`[êµ¬ì¡°ê²€í† ì˜ë¢°] ${formData.í”„ë¡œì íŠ¸ì •ë³´.í˜„ì¥ëª…} - ${formData.í”„ë¡œì íŠ¸ì •ë³´.ì—…ì²´ëª…}`);
            const body = encodeURIComponent(emailBody);
            const mailtoLink = `mailto:hj_str@naver.com?subject=${subject}&body=${body}`;
            
            // ì´ë©”ì¼ í´ë¼ì´ì–¸íŠ¸ ì—´ê¸°
            window.location.href = mailtoLink;
            
            // ëª¨ë‹¬ ë‹«ê¸°
            document.querySelector('div[style*="position: fixed"]').remove();
            
            // ì•ˆë‚´ ë©”ì‹œì§€
            setTimeout(() => {
                alert('ì´ë©”ì¼ í´ë¼ì´ì–¸íŠ¸ê°€ ì—´ë ¸ìŠµë‹ˆë‹¤.\në‚´ìš©ì„ í™•ì¸í•˜ì‹œê³  ì „ì†¡í•´ì£¼ì„¸ìš”.\n\në§Œì•½ ì´ë©”ì¼ í´ë¼ì´ì–¸íŠ¸ê°€ ì—´ë¦¬ì§€ ì•Šì•˜ë‹¤ë©´,\níŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì§ì ‘ hj_str@naver.comìœ¼ë¡œ ë°œì†¡í•´ì£¼ì„¸ìš”.');
            }, 1000);
        }
        
        // ì¹´ì¹´ì˜¤í†¡ ì „ì†¡ í•¨ìˆ˜
        function sendKakaoTalk(formData) {
            const message = generateKakaoMessage(formData);
            
            // ì¹´ì¹´ì˜¤í†¡ ì˜¤í”ˆì±„íŒ… ë§í¬
            const kakaoLink = 'https://open.kakao.com/o/sq6cfvBh';
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(message).then(() => {
                window.open(kakaoLink, '_blank');
                
                // ëª¨ë‹¬ ë‹«ê¸°
                document.querySelector('div[style*="position: fixed"]').remove();
                
                alert('ì˜ë¢°ì„œ ë‚´ìš©ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì˜¤í”ˆì¹´ì¹´ì˜¤í†¡ ì±„íŒ…ì°½ì— ë¶™ì—¬ë„£ê¸°(Ctrl+V) í•´ì£¼ì„¸ìš”.');
            }).catch(() => {
                // í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ë‹¤ìš´ë¡œë“œ
                downloadFile(formData);
                window.open(kakaoLink, '_blank');
            });
        }
        
        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
        function downloadFile(formData) {
            const content = generateFileContent(formData);
            
            // Blob ìƒì„±
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
            const a = document.createElement('a');
            a.href = url;
            a.download = `êµ¬ì¡°ê²€í† ì˜ë¢°ì„œ_${formData.í”„ë¡œì íŠ¸ì •ë³´.í˜„ì¥ëª…}_${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // ëª¨ë‹¬ ë‹«ê¸°
            const modal = document.querySelector('div[style*="position: fixed"]');
            if (modal) modal.remove();
            
            alert('ì˜ë¢°ì„œê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.\n\në‹¤ìš´ë¡œë“œí•œ íŒŒì¼ì„ ì•„ë˜ ë°©ë²•ìœ¼ë¡œ ì „ì†¡í•´ì£¼ì„¸ìš”:\n\n1. ì´ë©”ì¼: hj_str@naver.com\n2. ì˜¤í”ˆì¹´ì¹´ì˜¤í†¡: https://open.kakao.com/o/sq6cfvBh');
        }
        
                    // ì´ë©”ì¼ ë³¸ë¬¸ ìƒì„±
        function generateEmailBody(formData) {
            let body = 'HJêµ¬ì¡°ì‚¬ë¬´ì‹¤ êµ¬ì¡°ê²€í†  ì˜ë¢°ì„œ\n\n';
            body += '=== ë°œì‹  ì •ë³´ ===\n';
            body += `íšŒì‚¬: ${formData.ë°œì‹ ì •ë³´.íšŒì‚¬}\n`;
            body += `ë‹´ë‹¹ì: ${formData.ë°œì‹ ì •ë³´.ë‹´ë‹¹ì}\n`;
            body += `ì—°ë½ì²˜: ${formData.ë°œì‹ ì •ë³´.ì—°ë½ì²˜}\n`;
            body += `ì ‘ìˆ˜ë‚ ì§œ: ${formData.ë°œì‹ ì •ë³´.ì ‘ìˆ˜ë‚ ì§œ}\n`;
            body += `í¬ë§ë‚ ì§œ: ${formData.ë°œì‹ ì •ë³´.í¬ë§ë‚ ì§œ}\n\n`;
            
            body += '=== í”„ë¡œì íŠ¸ ì •ë³´ ===\n';
            body += `ì—…ì²´ëª…: ${formData.í”„ë¡œì íŠ¸ì •ë³´.ì—…ì²´ëª…}\n`;
            body += `í˜„ì¥ëª…: ${formData.í”„ë¡œì íŠ¸ì •ë³´.í˜„ì¥ëª…}\n`;
            body += `ê²€í† êµ¬ë¶„: ${formData.í”„ë¡œì íŠ¸ì •ë³´.ê²€í† êµ¬ë¶„}\n\n`;
            
            // ì‹œìŠ¤í…œë™ë°”ë¦¬ ì •ë³´
            if (formData.ì‹œìŠ¤í…œë™ë°”ë¦¬) {
                body += '=== ì‹œìŠ¤í…œë™ë°”ë¦¬ ê²€í† ë‚´ìš© ===\n';
                body += 'ìŠ¬ë¼ë¸Œ:\n';
                formData.ì‹œìŠ¤í…œë™ë°”ë¦¬.ìŠ¬ë¼ë¸Œ.forEach(row => {
                    body += row.join(' | ') + '\n';
                });
                body += '\në³´:\n';
                formData.ì‹œìŠ¤í…œë™ë°”ë¦¬.ë³´.forEach(row => {
                    body += row.join(' | ') + '\n';
                });
                body += '\n';
            }
            
            // ì‹œìŠ¤í…œë¹„ê³„ ì •ë³´
            if (formData.ì‹œìŠ¤í…œë¹„ê³„) {
                body += '=== ì‹œìŠ¤í…œë¹„ê³„ ê²€í† ë‚´ìš© ===\n';
                body += `ì‘ì—…êµ¬ë¶„: ${formData.ì‹œìŠ¤í…œë¹„ê³„.ì‘ì—…êµ¬ë¶„}\n`;
                body += `ìµœê³ ë†’ì´: ${formData.ì‹œìŠ¤í…œë¹„ê³„.ìµœê³ ë†’ì´}\n`;
                body += `ì„¤ì¹˜ê¸¸ì´: ${formData.ì‹œìŠ¤í…œë¹„ê³„.ì„¤ì¹˜ê¸¸ì´}\n`;
                body += `ì„¤ì¹˜ìœ„ì¹˜: ${formData.ì‹œìŠ¤í…œë¹„ê³„.ì„¤ì¹˜ìœ„ì¹˜}\n`;
                body += 'ìƒì„¸ë‚´ì—­:\n';
                formData.ì‹œìŠ¤í…œë¹„ê³„.ìƒì„¸ë‚´ì—­.forEach(row => {
                    body += row.join(' | ') + '\n';
                });
                body += '\n';
            }
            
            // ì¶”ê°€ ìš”ì²­ì‚¬í•­
            if (formData.ì¶”ê°€ìš”ì²­ì‚¬í•­) {
                body += '=== ì¶”ê°€ ìš”ì²­ì‚¬í•­ ===\n';
                body += formData.ì¶”ê°€ìš”ì²­ì‚¬í•­ + '\n\n';
            }
            
            // ì²¨ë¶€íŒŒì¼ ì •ë³´
            if (formData.ì²¨ë¶€íŒŒì¼ && formData.ì²¨ë¶€íŒŒì¼.length > 0) {
                body += '=== ì²¨ë¶€íŒŒì¼ ì •ë³´ ===\n';
                formData.ì²¨ë¶€íŒŒì¼.forEach((file, index) => {
                    body += `${index + 1}. ${file.ì´ë¦„} (${file.í¬ê¸°})\n`;
                });
                body += `ì´ íŒŒì¼ í¬ê¸°: ${formData.ì´íŒŒì¼í¬ê¸°}\n`;
                
                if (parseFloat(formData.ì´íŒŒì¼í¬ê¸°) > 10) {
                    body += '\nâ€» íŒŒì¼ ìš©ëŸ‰ì´ 10MBë¥¼ ì´ˆê³¼í•˜ì—¬ ë³„ë„ ì´ë©”ì¼ë¡œ ì „ì†¡ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n';
                    body += 'â€» ì›ë„ ë„ë©´(DWG, PDF)ì€ ì •í™•í•œ ê²€í† ë¥¼ ìœ„í•´ ë°˜ë“œì‹œ ì „ì†¡í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\n';
                }
            }
            
            return body;
        }
        
                    // ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ ìƒì„±
        function generateKakaoMessage(formData) {
            let message = '[HJêµ¬ì¡°ì‚¬ë¬´ì‹¤ êµ¬ì¡°ê²€í†  ì˜ë¢°ì„œ]\n\n';
            message += `ğŸ“‹ í˜„ì¥ëª…: ${formData.í”„ë¡œì íŠ¸ì •ë³´.í˜„ì¥ëª…}\n`;
            message += `ğŸ¢ ì—…ì²´ëª…: ${formData.í”„ë¡œì íŠ¸ì •ë³´.ì—…ì²´ëª…}\n`;
            message += `ğŸ“ ë‹´ë‹¹ì: ${formData.ë°œì‹ ì •ë³´.ë‹´ë‹¹ì} (${formData.ë°œì‹ ì •ë³´.ì—°ë½ì²˜})\n`;
            message += `ğŸ“… í¬ë§ë‚ ì§œ: ${formData.ë°œì‹ ì •ë³´.í¬ë§ë‚ ì§œ}\n\n`;
            
            message += `âœ… ê²€í† êµ¬ë¶„: ${formData.í”„ë¡œì íŠ¸ì •ë³´.ê²€í† êµ¬ë¶„}\n\n`;
            
            if (formData.ì‹œìŠ¤í…œë™ë°”ë¦¬) {
                message += 'ã€ì‹œìŠ¤í…œë™ë°”ë¦¬ã€‘\n';
                message += `- ìŠ¬ë¼ë¸Œ: ${formData.ì‹œìŠ¤í…œë™ë°”ë¦¬.ìŠ¬ë¼ë¸Œ.length}ê°œ êµ¬ê°„\n`;
                message += `- ë³´: ${formData.ì‹œìŠ¤í…œë™ë°”ë¦¬.ë³´.length}ê°œ êµ¬ê°„\n\n`;
            }
            
            if (formData.ì‹œìŠ¤í…œë¹„ê³„) {
                message += 'ã€ì‹œìŠ¤í…œë¹„ê³„ã€‘\n';
                message += `- ì‘ì—…êµ¬ë¶„: ${formData.ì‹œìŠ¤í…œë¹„ê³„.ì‘ì—…êµ¬ë¶„}\n`;
                message += `- ìµœê³ ë†’ì´: ${formData.ì‹œìŠ¤í…œë¹„ê³„.ìµœê³ ë†’ì´}\n`;
                message += `- ì„¤ì¹˜ìœ„ì¹˜: ${formData.ì‹œìŠ¤í…œë¹„ê³„.ì„¤ì¹˜ìœ„ì¹˜}\n\n`;
            }
            
            if (formData.ì¶”ê°€ìš”ì²­ì‚¬í•­) {
                message += `ğŸ“ ì¶”ê°€ìš”ì²­: ${formData.ì¶”ê°€ìš”ì²­ì‚¬í•­}\n\n`;
            }
            
            if (formData.ì²¨ë¶€íŒŒì¼ && formData.ì²¨ë¶€íŒŒì¼.length > 0) {
                message += `ğŸ“ ì²¨ë¶€íŒŒì¼: ${formData.ì²¨ë¶€íŒŒì¼.length}ê°œ (${formData.ì´íŒŒì¼í¬ê¸°})\n`;
                if (parseFloat(formData.ì´íŒŒì¼í¬ê¸°) > 10) {
                    message += 'âš ï¸ íŒŒì¼ì´ 10MBë¥¼ ì´ˆê³¼í•˜ì—¬ ì´ë©”ì¼ë¡œ ë³„ë„ ì „ì†¡ í•„ìš”\n';
                }
            }
            
            return message;
        }
        
        // íŒŒì¼ ë‚´ìš© ìƒì„±
        function generateFileContent(formData) {
            let content = 'HJêµ¬ì¡°ì‚¬ë¬´ì‹¤\n';
            content += 'êµ¬ì¡°ê²€í†  ì˜ë¢°ì„œ\n';
            content += '=' .repeat(50) + '\n\n';
            
            content += generateEmailBody(formData);
            
            content += '\n' + '=' .repeat(50) + '\n';
            content += 'ìˆ˜ì‹ : HJêµ¬ì¡°ì‚¬ë¬´ì‹¤\n';
            content += 'ì—°ë½ì²˜: 010-7970-2108\n';
            content += 'ì´ë©”ì¼: hj_str@naver.com\n';
            content += 'ì˜¤í”ˆì¹´ì¹´ì˜¤í†¡: https://open.kakao.com/o/sq6cfvBh\n';
            content += '\në°œì†¡ì¼ì‹œ: ' + new Date().toLocaleString() + '\n';
            
            return content;
        }
        
        // ì˜¤ëŠ˜ ë‚ ì§œ ê¸°ë³¸ê°’ ì„¤ì •
        window.onload = function() {
            const today = new Date().toISOString().split('T')[0];
            document.querySelector('input[name="receiveDate"]').value = today;
            
            // ì²¨ë¶€íŒŒì¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('attachments').addEventListener('change', function() {
                const fileList = document.getElementById('fileList');
                fileList.innerHTML = '';
                
                if (this.files.length > 0) {
                    let totalSize = 0;
                    fileList.innerHTML = '<h4 style="margin-bottom: 10px;">ì„ íƒëœ íŒŒì¼:</h4>';
                    
                    for (let i = 0; i < this.files.length; i++) {
                        const file = this.files[i];
                        const fileSize = (file.size / 1024 / 1024).toFixed(2);
                        totalSize += file.size;
                        
                        fileList.innerHTML += `
                            <div style="padding: 5px; background: #f5f5f5; margin: 5px 0; border-radius: 3px;">
                                ğŸ“„ ${file.name} (${fileSize}MB)
                            </div>
                        `;
                    }
                    
                    const totalSizeMB = (totalSize / 1024 / 1024).toFixed(2);
                    fileList.innerHTML += `
                        <div style="margin-top: 10px; font-weight: bold; color: ${totalSizeMB > 10 ? '#ff4444' : '#27ae60'};">
                            ì´ íŒŒì¼ í¬ê¸°: ${totalSizeMB}MB
                            ${totalSizeMB > 10 ? '<br><span style="color: #ff4444;">âš ï¸ 10MBë¥¼ ì´ˆê³¼í•˜ì—¬ ì´ë©”ì¼ë¡œ ë³„ë„ ì „ì†¡ì´ í•„ìš”í•©ë‹ˆë‹¤.</span>' : ''}
                        </div>
                    `;
                }
            });
        };
    </script>
</body>
</html>