<!DOCTYPE html>
<!--
==============================================================
                     ⚠️ 중요 경고 ⚠️
==============================================================
파일명: 시스템비계 물량산출 (가설파트너).html

이 파일의 파일명과 내용을 변경하지 마십시오.
본 프로그램은 저작권법에 의해 보호되고 있습니다.

© 2025 가설파트너. All rights reserved.

무단 복제, 수정, 배포 시 법적 처벌을 받을 수 있습니다.
문의: 010-7970-2108 | fc112@naver.com
==============================================================
-->
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="가설파트너 - 시스템 비계 물량산출 프로그램 v1.00">
    <meta name="author" content="가설파트너">
    <meta name="keywords" content="시스템비계, 물량산출, 건설, 가설구조물, 비계설계">
    <meta name="copyright" content="© 2025 가설파트너. All rights reserved.">
    <meta name="generator" content="가설파트너 시스템 비계 v1.00">
    <meta name="application-name" content="시스템 비계 물량산출">
    <meta name="msapplication-tooltip" content="가설파트너 시스템 비계 물량산출 프로그램">
    <meta name="msapplication-TileColor" content="#2a5298">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="robots" content="noindex, nofollow">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>시스템 비계 물량산출 v1.00 - 가설파트너</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }
        
        input, textarea {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        body {
            font-family: 'Malgun Gothic', 'Noto Sans KR', sans-serif;
            background: #1a1a1a;
            color: #fff;
            overflow-x: hidden;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body::before {
            content: "© 2025 가설파트너";
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 120px;
            color: rgba(255, 255, 255, 0.02);
            z-index: -1;
            pointer-events: none;
            white-space: nowrap;
        }
        
        .company-header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .company-header::before {
            content: "";
            position: absolute;
            top: -50%;
            right: -50%;
            bottom: -50%;
            left: -50%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .company-name {
            font-size: 32px;
            font-weight: bold;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            position: relative;
            z-index: 1;
        }
        
        .program-title {
            font-size: 20px;
            color: #fff;
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .legal-notice {
            background: #ffeeee;
            border: 2px solid #ff4444;
            padding: 15px;
            margin: 20px;
            border-radius: 5px;
            color: #aa0000;
            font-weight: bold;
            text-align: center;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .input-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .section-title {
            color: #1e3c72;
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #2a5298;
        }
        
        .structure-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .structure-type-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .structure-type-card h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #2a5298;
        }
        
        .structure-type-card h4 {
            font-size: 16px;
            margin: 10px 0;
            color: #333;
            font-weight: 600;
        }
        
        .structure-type-card p {
            font-size: 14px;
            color: #555;
            line-height: 1.4;
            font-weight: 500;
        }
        
        .structure-type-card:hover {
            border-color: #2a5298;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(42, 82, 152, 0.2);
        }
        
        .structure-type-card.active {
            background: #2a5298;
            color: white;
            border-color: #2a5298;
        }
        
        .structure-type-card.active h3,
        .structure-type-card.active h4,
        .structure-type-card.active p {
            color: white;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-label {
            display: block;
            color: #555;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .input-field {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fff;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }
        
        .rate-container {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .slider {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #2a5298;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #2a5298;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .slider-value {
            min-width: 80px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #2a5298;
        }
        
        .calculate-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .calculate-button::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .calculate-button:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .calculate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(42, 82, 152, 0.3);
        }
        
        .result-section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .result-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .result-header {
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .result-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .result-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-color: #2a5298;
        }
        
        .result-label {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .result-value {
            color: #2a5298;
            font-size: 32px;
            font-weight: bold;
        }
        
        .result-unit {
            color: #888;
            font-size: 16px;
            margin-left: 5px;
        }
        
        .detail-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
        }
        
        .detail-table th {
            background: #2a5298;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: white;
            border-bottom: 2px solid #1e3c72;
        }
        
        .detail-table td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
            color: #333;
        }
        
        .detail-table tr:hover {
            background: #f0f4ff;
        }
        
        .detail-table td[colspan] {
            background: #e8f0ff;
            font-weight: bold;
            color: #1e3c72;
        }
        
        .price-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
        }
        
        .price-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .price-header h3 {
            color: #1e3c72;
            font-size: 20px;
        }
        
        .price-header-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .toggle-price-btn, .price-action-btn {
            background: #2a5298;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }
        
        .toggle-price-btn:hover, .price-action-btn:hover {
            background: #1e3c72;
        }
        
        .price-input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
            max-height: 400px;
            overflow-y: auto;
            padding: 10px;
            background: #f0f4f8;
            border-radius: 8px;
        }
        
        .price-input-item {
            display: grid;
            grid-template-columns: minmax(120px, 1.5fr) 1fr 1fr;
            gap: 5px;
            align-items: center;
            padding: 8px;
            background: white;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
            font-size: 13px;
        }
        
        .price-input-item label {
            font-size: 12px;
            color: #555;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .price-input-item input {
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 12px;
            text-align: right;
            width: 100%;
        }
        
        .usage-days-container {
            background: #e8f0ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .usage-days-container label {
            color: #1e3c72;
            font-weight: bold;
        }
        
        .usage-days-container input {
            width: 80px;
            padding: 6px;
            border: 2px solid #2a5298;
            border-radius: 5px;
            font-size: 14px;
            text-align: center;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #f6f9fc 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 12px;
            margin-top: 25px;
            border: 1px solid #dee2e6;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            text-align: center;
        }
        
        .summary-item {
            padding: 15px;
        }
        
        .summary-label {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .summary-value {
            color: #1e3c72;
            font-size: 24px;
            font-weight: bold;
        }
        
        .legal-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
        }
        
        .legal-warning h3 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .legal-warning p {
            color: #856404;
            line-height: 1.6;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .button-primary {
            background: #2a5298;
            color: white;
        }
        
        .button-primary:hover {
            background: #1e3c72;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(42, 82, 152, 0.3);
        }
        
        .button-secondary {
            background: #6c757d;
            color: white;
        }
        
        .button-secondary:hover {
            background: #5a6268;
        }
        
        .button-success {
            background: #28a745;
            color: white;
        }
        
        .button-success:hover {
            background: #218838;
        }
        
        .footer-info {
            background: #222;
            color: #aaa;
            padding: 40px 20px;
            text-align: center;
            margin-top: 60px;
        }
        
        .footer-info h3 {
            color: #fff;
            margin-bottom: 20px;
        }
        
        .footer-info p {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .footer-info a {
            color: #2a5298;
            text-decoration: none;
        }
        
        .footer-info a:hover {
            color: #4169e1;
            text-decoration: underline;
        }
        
        .copyright {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #444;
            font-size: 14px;
            color: #888;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalShow 0.3s ease-out;
        }
        
        @keyframes modalShow {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 28px;
            color: #999;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-modal:hover {
            color: #333;
        }
        
        /* 견적서 스타일 */
        .quotation-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            color: #000;
        }
        
        .quotation-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .quotation-title {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #2a5298;
        }
        
        .quotation-company {
            position: absolute;
            top: 0;
            right: 0;
            text-align: right;
            font-size: 14px;
            color: #666;
        }
        
        .quotation-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .quotation-info-item {
            display: flex;
            align-items: center;
        }
        
        .quotation-info-label {
            font-weight: bold;
            color: #555;
            margin-right: 10px;
            min-width: 100px;
        }
        
        .quotation-info-value {
            color: #000;
        }
        
        .quotation-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        
        .quotation-table th {
            background: #2a5298;
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: 600;
            border: 1px solid #1e3c72;
        }
        
        .quotation-table td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
        
        .quotation-table .category-header {
            background: #e8f0ff;
            font-weight: bold;
            color: #1e3c72;
            text-align: left;
        }
        
        .quotation-table .text-right {
            text-align: right;
        }
        
        .quotation-table .text-left {
            text-align: left;
        }
        
        .quotation-table tfoot td {
            background: #f8f9fa;
            font-weight: bold;
            border-top: 2px solid #2a5298;
        }
        
        .quotation-summary {
            background: #2a5298;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .quotation-summary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            text-align: center;
        }
        
        .quotation-summary-item h4 {
            font-size: 14px;
            margin-bottom: 5px;
            opacity: 0.9;
        }
        
        .quotation-summary-item p {
            font-size: 24px;
            font-weight: bold;
        }
        
        .quotation-footer {
            margin-top: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .quotation-footer h4 {
            color: #d9534f;
            margin-bottom: 10px;
        }
        
        .quotation-footer p {
            font-size: 14px;
            line-height: 1.6;
            color: #666;
        }
        
        .quotation-stamp {
            text-align: right;
            margin-top: 40px;
        }
        
        .quotation-stamp-box {
            display: inline-block;
            text-align: center;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        
        @media print {
            body {
                background: white;
                color: black;
            }
            
            .no-print {
                display: none !important;
            }
            
            .result-card {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }
            
            .quotation-container {
                box-shadow: none;
            }
        }
        
        @media (max-width: 768px) {
            .company-name {
                font-size: 24px;
            }
            
            .program-title {
                font-size: 16px;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
            
            .structure-types {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .button {
                width: 100%;
            }
        }
    </style>
</head>
<body oncontextmenu="return false" ondragstart="return false" onselectstart="return false">
    <!-- 상단 헤더 -->
    <div class="company-header">
        <h1 class="company-name">가설파트너</h1>
        <p class="program-title">시스템 비계 물량산출 v1.00</p>
    </div>
    
    <!-- 법적 공지 -->
    <div class="legal-notice">
        ⚠️ 본 프로그램은 참고용 물량 산출 프로그램입니다. 정확한 실 수량은 현장 상황을 고려하여 사용하시기 바랍니다.
    </div>
    
    <!-- 메인 컨테이너 -->
    <div class="main-container">
        <!-- 입력 섹션 -->
        <div class="input-section">
            <h2 class="section-title">🏗️ 시스템 비계 설치 정보 입력</h2>
            
            <!-- 구조 타입 선택 -->
            <div class="structure-types">
                <div class="structure-type-card active" onclick="selectStructureType('general-frame', this)">
                    <h3>골조용 비계</h3>
                    <h4>일반건축</h4>
                    <p>공장 및 오피스텔<br>10층 이상<br>500발판 1장 위주</p>
                </div>
                <div class="structure-type-card" onclick="selectStructureType('apt-underground', this)">
                    <h3>골조용 비계</h3>
                    <h4>아파트 지하층</h4>
                    <p>지하층<br>500발판 1장 위주<br>7-8m</p>
                </div>
                <div class="structure-type-card" onclick="selectStructureType('apt-frame', this)">
                    <h3>골조용 비계</h3>
                    <h4>아파트</h4>
                    <p>아파트 주동<br>500발판 1장 위주<br>11m 미만</p>
                </div>
                <div class="structure-type-card" onclick="selectStructureType('stone-type1', this)">
                    <h3>석재용 비계</h3>
                    <h4>아파트#1</h4>
                    <p>아파트 주동 (TYPE-1)<br>400발판 2장 설치<br>외벽부위 전체 설치</p>
                </div>
                <div class="structure-type-card" onclick="selectStructureType('stone-type2', this)">
                    <h3>석재용 비계</h3>
                    <h4>아파트#2</h4>
                    <p>아파트 주동 (TYPE-2)<br>400발판 2장 설치<br>외벽부위 구간별 설치</p>
                </div>
                <div class="structure-type-card" onclick="selectStructureType('stone-type3', this)">
                    <h3>석재용 비계</h3>
                    <h4>아파트#3</h4>
                    <p>아파트 주동 (TYPE-3)<br>400발판 2장 설치<br>외벽부위 구간별 단차 설치</p>
                </div>
                <div class="structure-type-card" onclick="selectStructureType('finish-general', this)">
                    <h3>마감용 비계</h3>
                    <h4>일반건축</h4>
                    <p>공장 및 오피스텔<br>10m 이상<br>400발판 2장 위주</p>
                </div>
                <div class="structure-type-card" onclick="selectStructureType('horizontal-piloti', this)">
                    <h3>수평 비계</h3>
                    <h4>필로티</h4>
                    <p>내천장 작업용<br>5m 이하<br>400,500 발판 위주</p>
                </div>
            </div>
            
            <!-- 기본 입력 정보 -->
            <div class="input-grid">
                <div class="input-group">
                    <label class="input-label" for="area">설치 면적 (㎡)</label>
                    <input type="number" class="input-field" id="area" value="1000" step="0.01" min="1" max="100000">
                </div>
            </div>
            
            <!-- 안전율 및 전용률 설정 -->
            <div class="rate-container">
                <label class="input-label">안전률 설정 (%)</label>
                <div class="slider-container">
                    <input type="range" class="slider" id="safetyRate" min="0" max="15" value="5" step="1">
                    <div class="slider-value"><span id="safetyRateDisplay">5</span>%</div>
                </div>
                <p style="margin-top: 10px; color: #666; font-size: 14px;">
                    * 현장 여건에 따라 0~15% 범위에서 조정 가능합니다.
                </p>
                
                <label class="input-label" style="margin-top: 20px;">전용률 설정 (%)</label>
                <div class="slider-container">
                    <input type="range" class="slider" id="reuseRate" min="0" max="100" value="0" step="10">
                    <div class="slider-value"><span id="reuseRateDisplay">0</span>%</div>
                </div>
                <p style="margin-top: 10px; color: #666; font-size: 14px;">
                    * 재사용 비율을 설정합니다. 전용률 10% = 최종수량의 90%만 표시
                </p>
            </div>
            
            <!-- 계산 버튼 -->
            <button class="calculate-button" onclick="calculateQuantity()">
                물량 계산하기
            </button>
        </div>
        
        <!-- 결과 섹션 -->
        <div class="result-section" id="resultSection">
            <div class="result-card">
                <div class="result-header">
                    <h2 class="result-title">📊 시스템 비계 물량 산출 결과</h2>
                    <p id="resultInfo" style="margin-top: 10px;"></p>
                </div>
                
                <!-- 주요 자재 수량 -->
                <div class="result-grid">
                    <div class="result-item">
                        <div class="result-label">수직재</div>
                        <div>
                            <span class="result-value" id="verticalCount">0</span>
                            <span class="result-unit">개</span>
                        </div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">수평재</div>
                        <div>
                            <span class="result-value" id="horizontalCount">0</span>
                            <span class="result-unit">개</span>
                        </div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">하부자키</div>
                        <div>
                            <span class="result-value" id="jackCount">0</span>
                            <span class="result-unit">개</span>
                        </div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">안전발판</div>
                        <div>
                            <span class="result-value" id="deckCount">0</span>
                            <span class="result-unit">개</span>
                        </div>
                    </div>
                </div>
                
                <!-- 단가 입력 섹션 -->
                <div class="price-section">
                    <div class="price-header">
                        <h3>💰 자재 단가 입력</h3>
                        <div class="price-header-buttons">
                            <button class="toggle-price-btn" onclick="togglePriceSection()">단가 입력</button>
                            <button class="price-action-btn" onclick="savePriceData()">단가 저장</button>
                            <button class="price-action-btn" onclick="loadPriceData()">단가 불러오기</button>
                        </div>
                    </div>
                    
                    <div id="priceInputContainer" style="display: none;">
                        <div class="usage-days-container">
                            <label for="usageDays">사용 일수:</label>
                            <input type="number" id="usageDays" value="30" min="1" max="365">일
                            <button class="button button-primary" onclick="calculatePrice()" style="margin-left: auto;">
                                금액 계산하기
                            </button>
                        </div>
                        
                        <div class="price-input-grid" id="priceInputGrid">
                            <!-- 동적으로 생성됨 -->
                        </div>
                    </div>
                </div>
                
                <!-- 상세 수량 테이블 -->
                <h3 style="margin-top: 40px; margin-bottom: 20px; color: #1e3c72; font-size: 20px;">📋 상세 자재 수량</h3>
                <table class="detail-table">
                    <thead>
                        <tr>
                            <th>자재명</th>
                            <th>규격</th>
                            <th>기본수량</th>
                            <th>최종수량</th>
                            <th class="price-column" style="display: none;">기본료(원)</th>
                            <th class="price-column" style="display: none;">일단가(원)</th>
                            <th class="price-column" style="display: none;">총금액(원)</th>
                        </tr>
                    </thead>
                    <tbody id="detailTableBody">
                        <!-- 동적으로 추가됨 -->
                    </tbody>
                </table>
                
                <!-- 요약 정보 -->
                <div class="summary-box">
                    <div class="summary-grid">
                        <div class="summary-item">
                            <div class="summary-label">설치 면적</div>
                            <div class="summary-value" id="totalArea">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">안전률</div>
                            <div class="summary-value" id="appliedSafetyRate">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">전용률</div>
                            <div class="summary-value" id="appliedReuseRate">-</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">적용 비율</div>
                            <div class="summary-value" id="appliedRatio">-</div>
                        </div>
                        <div class="summary-item price-summary" style="display: none;">
                            <div class="summary-label">총 자재비</div>
                            <div class="summary-value" id="totalPrice">-</div>
                        </div>
                        <div class="summary-item price-summary" style="display: none;">
                            <div class="summary-label">㎡당 단가</div>
                            <div class="summary-value" id="pricePerM2">-</div>
                        </div>
                    </div>
                </div>
                
                <!-- 법적 고지 -->
                <div class="legal-warning">
                    <h3>⚠️ 중요 안내사항</h3>
                    <p>
                        본 계산 결과는 참고용이며, 실제 현장 조건에 따라 수량이 달라질 수 있습니다.<br>
                        정확한 실 수량은 현장 상황을 고려하여 사용하시기 바랍니다.<br>
                        <strong style="color: #ff0000;">본 프로그램은 견적시 참고용으로 사용하시고 실수량으로 사용함에 책임이 없습니다.</strong>
                    </p>
                </div>
                
                <!-- 버튼 그룹 -->
                <div class="button-group">
                    <button class="button button-primary no-print" onclick="window.print()">
                        🖨️ 인쇄하기
                    </button>
                    <button class="button button-primary no-print" onclick="generateQuotation()">
                        📄 견적서 생성
                    </button>
                    <button class="button button-success no-print" onclick="exportToExcel()">
                        📊 엑셀 내보내기
                    </button>
                    <button class="button button-success no-print" onclick="saveCurrentProject()">
                        💾 프로젝트 저장
                    </button>
                    <button class="button button-secondary no-print" onclick="showProjectList()">
                        📁 저장된 프로젝트
                    </button>
                    <button class="button button-secondary no-print" onclick="resetCalculator()">
                        🔄 초기화
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 하단 정보 -->
    <div class="footer-info">
        <h3>가설파트너</h3>
        <p>
            가설재 프로그램 및 구조 검토<br>
            📞 문의: 010-7970-2108 | ✉️ 이메일: fc112@naver.com<br>
            🌐 웹사이트: <a href="https://gaseolpartner.com" target="_blank">gaseolpartner.com</a>
        </p>
        <div class="copyright">
            <p>
                © 2025 가설파트너. All rights reserved.<br>
                본 프로그램의 모든 저작권은 가설파트너에 있습니다.<br>
                무단 복제 및 배포를 금지합니다.
            </p>
        </div>
    </div>
    
    <script>
        // 초기 보안 경고
        console.log('%c⚠️ 정지!', 'color: red; font-size: 50px; font-weight: bold;');
        console.log('%c본 프로그램의 모든 코드는 저작권으로 보호됩니다.', 'color: red; font-size: 16px;');
        console.log('%c© 2025 가설파트너. All rights reserved.', 'color: #2a5298; font-size: 16px; font-weight: bold;');
        
        // 전역 변수
        let currentType = 'general-frame';
        let materialData = {};
        let calculatedMaterials = {};
        let priceData = {};
        let savedPriceInputs = {}; // 단가 입력값 저장용
        
        // 자재별 비율 데이터 (완전한 버전)
        const scaffoldData = {
            'general-frame': {
                name: '골조용 비계 (일반건축)',
                description: '공장 및 오피스텔 / 10층 이상 / 500발판 1장 위주',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.31871240899018677 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.05721747388414055 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.062104305159860713 },
                    'SP-475': { name: '수직재', spec: 'SP-475', ratio: 0.03377255460588794 },
                    'SP-275': { name: '수직재', spec: 'SP-275', ratio: 0.00308740899018677 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 1.29366492560937 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.06528964862298195 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.1305792972459639 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.1601772712883824 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.5673274770496993 },
                    'SH-305': { name: '수평재', spec: 'SH-305', ratio: 0.02101139601139601 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.0617481798037354 },
                    'BRACE': { name: '대각가새', spec: '1900*1829', ratio: 0.06416191832858499 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.003798670465337132 },
                    'HK-2434': { name: '비계버팀대', spec: 'HK-2434', ratio: 0.0005935422602089269 },
                    'HK-3352': { name: '비계버팀대', spec: 'HK-3352', ratio: 0.04708768597657487 },
                    'HK-4872': { name: '비계버팀대', spec: 'HK-4872', ratio: 0.01309749920861032 },
                    'DECK-400-914': { name: '안전발판', spec: '400*914', ratio: 0.003897594175371953 },
                    'DECK-400-1219': { name: '안전발판', spec: '400*1219', ratio: 0.0012464387464387464 },
                    'DECK-400-1524': { name: '안전발판', spec: '400*1524', ratio: 0.0011475150364039252 },
                    'DECK-400-1829': { name: '안전발판', spec: '400*1829', ratio: 0.03393083254194365 },
                    'DECK-500-610': { name: '안전발판', spec: '500*610', ratio: 0.008764640709085154 },
                    'DECK-500-914': { name: '안전발판', spec: '500*914', ratio: 0.021407090851535297 },
                    'DECK-500-1219': { name: '안전발판', spec: '500*1219', ratio: 0.022475466919911365 },
                    'DECK-500-1524': { name: '안전발판', spec: '500*1524', ratio: 0.01501661918328585 },
                    'DECK-500-1829': { name: '안전발판', spec: '500*1829', ratio: 0.22983934789490346 },
                    'LADDER': { name: 'B/T사다리', spec: '400*1700', ratio: 0.009199905033238366 },
                    'OPENABLE-DECK': { name: '개폐형발판', spec: '500*1829', ratio: 0.009852801519468187 }
                }
            },
            'horizontal-piloti': {
                name: '수평 비계 (필로티)',
                description: '내천장 작업용 / 5m 이하 / 400,500 발판 위주',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.04909946323765368 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.008767761292438156 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.03244071678202118 },
                    'SP-475': { name: '수직재', spec: 'SP-475', ratio: 0.02454973161882684 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 0.2674167194193638 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.02191940323109539 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.047345910979166045 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.05085301549614131 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.019289074843363944 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.04909946323765368 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.0010521313550925788 },
                    'HK-4872': { name: '비계버팀대', spec: 'HK-4872', ratio: 1.0 },
                    'DECK-400-914': { name: '안전발판', spec: '400*914', ratio: 0.0035071045169752625 },
                    'DECK-400-1219': { name: '안전발판', spec: '400*1219', ratio: 0.007014209033950525 },
                    'DECK-400-1524': { name: '안전발판', spec: '400*1524', ratio: 0.006312788130555472 },
                    'DECK-400-1829': { name: '안전발판', spec: '400*1829', ratio: 0.12537898648186563 },
                    'DECK-500-610': { name: '안전발판', spec: '500*610', ratio: 0.0008767761292438156 },
                    'DECK-500-914': { name: '안전발판', spec: '500*914', ratio: 0.002630328387731447 },
                    'DECK-500-1219': { name: '안전발판', spec: '500*1219', ratio: 0.005260656775462894 },
                    'DECK-500-1524': { name: '안전발판', spec: '500*1524', ratio: 0.005260656775462894 },
                    'DECK-500-1829': { name: '안전발판', spec: '500*1829', ratio: 0.06575820969328618 }
                }
            },
            'apt-underground': {
                name: '골조용 비계 (아파트 지하층)',
                description: '지하층 / 500발판 1장 위주 / 7-8m',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.277858527131783 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.104166666666667 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.11797480620155039 },
                    'SP-475': { name: '수직재', spec: 'SP-475', ratio: 0.15988372093023256 },
                    'SP-275': { name: '수직재', spec: 'SP-275', ratio: 0.013045058139534885 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 1.1688468992248062 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.1005329457364341 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.15770348837209303 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.07945736434108527 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.6010174418604651 },
                    'SH-305': { name: '수평재', spec: 'SH-305', ratio: 0.011385658914728682 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.2609011627906977 },
                    'BRACE': { name: '대각가새', spec: '1900*1829', ratio: 0.04844961240310078 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.0029069767441860465 },
                    'HK-3352': { name: '비계버팀대', spec: 'HK-3352', ratio: 0.031492248062015504 },
                    'DECK-500-914': { name: '안전발판', spec: '500*914', ratio: 0.011143410852713179 },
                    'DECK-500-1219': { name: '안전발판', spec: '500*1219', ratio: 0.022771317829457363 },
                    'DECK-500-1524': { name: '안전발판', spec: '500*1524', ratio: 0.02567829457364341 },
                    'DECK-500-1829': { name: '안전발판', spec: '500*1829', ratio: 0.18846899224806202 },
                    'LADDER': { name: 'B/T사다리', spec: '400*1700', ratio: 0.012112403100775194 },
                    'OPENABLE-DECK': { name: '개폐형발판', spec: '500*1829', ratio: 0.012112403100775194 }
                }
            },
            'apt-frame': {
                name: '골조용 비계 (아파트)',
                description: '아파트 주동 / 500발판 1장 위주 / 11m 미만',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.24873708233966715 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.12000923147934457 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.18437315690950587 },
                    'SP-275': { name: '수직재', spec: 'SP-275', ratio: 0.009218657845475294 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 0.9998204990127446 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.062568915557607 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.13180501064184424 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.10077698284483422 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.646972844064928 },
                    'SH-305': { name: '수평재', spec: 'SH-305', ratio: 0.07282611482934585 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.18437315690950587 },
                    'BRACE': { name: '대각가새', spec: '1900*1829', ratio: 0.038464497269020695 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.001538579890760828 },
                    'HK-3352': { name: '비계버팀대', spec: 'HK-3352', ratio: 0.038464497269020695 },
                    'DECK-500-610': { name: '안전발판', spec: '500*610', ratio: 0.005128599635869426 },
                    'DECK-500-914': { name: '안전발판', spec: '500*914', ratio: 0.03769520732364028 },
                    'DECK-500-1219': { name: '안전발판', spec: '500*1219', ratio: 0.018462958689129935 },
                    'DECK-500-1524': { name: '안전발판', spec: '500*1524', ratio: 0.016924378798369107 },
                    'DECK-500-1829': { name: '안전발판', spec: '500*1829', ratio: 0.17847526732825603 },
                    'LADDER': { name: 'B/T사다리', spec: '400*1700', ratio: 0.007180039490217197 },
                    'OPENABLE-DECK': { name: '개폐형발판', spec: '500*1829', ratio: 0.007180039490217197 }
                }
            },
            'stone-type1': {
                name: '석재용 비계 (아파트#1)',
                description: '아파트 주동 (TYPE-1) / 400발판 2장 설치 / 외벽부위 전체 설치',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.3344072739312593 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.006239892011664778 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.0609981280323965 },
                    'SP-475': { name: '수직재', spec: 'SP-475', ratio: 0.02101188126376915 },
                    'SP-275': { name: '수직재', spec: 'SP-275', ratio: 0.006857513976084659 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 0.8895029734995606 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.0925796222955162 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.14963006354502273 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.6964483553427484 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.08621238554891948 },
                    'SH-305': { name: '수평재', spec: 'SH-305', ratio: 0.051192583442637565 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.13715027952169317 },
                    'BRACE': { name: '대각가새', spec: '1900*1829', ratio: 0.04699020718988373 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.005730513071937041 },
                    'HK-2434': { name: '비계버팀대', spec: 'HK-2434', ratio: 0.01502667872196824 },
                    'HK-3352': { name: '비계버팀대', spec: 'HK-3352', ratio: 0.020375157589109478 },
                    'DECK-400-914': { name: '안전발판', spec: '400*914', ratio: 0.06660129636940161 },
                    'DECK-400-1219': { name: '안전발판', spec: '400*1219', ratio: 0.060870783297464565 },
                    'DECK-400-1524': { name: '안전발판', spec: '400*1524', ratio: 0.054248857081003986 },
                    'DECK-400-1829': { name: '안전발판', spec: '400*1829', ratio: 0.414379767468514 }
                }
            },
            'stone-type2': {
                name: '석재용 비계 (아파트#2)',
                description: '아파트 주동 (TYPE-2) / 400발판 2장 설치 / 외벽부위 구간별 설치',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.30294030294030294 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.15147015147015147 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.08434808434808434 },
                    'SP-275': { name: '수직재', spec: 'SP-275', ratio: 0.007573507573507574 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 0.8274428274428275 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.05761805761805762 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.18057618057618058 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.8446688446688446 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.1473121473121473 },
                    'SH-305': { name: '수평재', spec: 'SH-305', ratio: 0.04395604395604396 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.15147015147015147 },
                    'BRACE': { name: '대각가새', spec: '1900*1829', ratio: 0.04158004158004158 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.004752004752004752 },
                    'HK-2434': { name: '비계버팀대', spec: 'HK-2434', ratio: 0.01188001188001188 },
                    'HK-3352': { name: '비계버팀대', spec: 'HK-3352', ratio: 0.02376002376002376 },
                    'DECK-400-914': { name: '안전발판', spec: '400*914', ratio: 0.051084051084051084 },
                    'DECK-400-1219': { name: '안전발판', spec: '400*1219', ratio: 0.07128007128007129 },
                    'DECK-400-1524': { name: '안전발판', spec: '400*1524', ratio: 0.06296406296406297 },
                    'DECK-400-1829': { name: '안전발판', spec: '400*1829', ratio: 0.4300564300564301 }
                }
            },
            'stone-type3': {
                name: '석재용 비계 (아파트#3)',
                description: '아파트 주동 (TYPE-3) / 400발판 2장 설치 / 외벽부위 구간별 단차 설치',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.327281362664882 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.03292243258996999 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.029792102933874482 },
                    'SP-275': { name: '수직재', spec: 'SP-275', ratio: 0.007016256125731309 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 0.8987284385052136 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.1085900563459338 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.20724941171390945 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.7349798147708382 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.0996308369853846 },
                    'SH-305': { name: '수평재', spec: 'SH-305', ratio: 0.04026251592150428 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.14032512251462617 },
                    'BRACE': { name: '대각가새', spec: '1900*1829', ratio: 0.038211610284752055 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.006908313723796982 },
                    'HK-2434': { name: '비계버팀대', spec: 'HK-2434', ratio: 0.014032512251462619 },
                    'HK-3352': { name: '비계버팀대', spec: 'HK-3352', ratio: 0.01996934435785065 },
                    'DECK-400-914': { name: '안전발판', spec: '400*914', ratio: 0.047278772047235594 },
                    'DECK-400-1219': { name: '안전발판', spec: '400*1219', ratio: 0.046199348027892315 },
                    'DECK-400-1524': { name: '안전발판', spec: '400*1524', ratio: 0.059152436260011654 },
                    'DECK-400-1829': { name: '안전발판', spec: '400*1829', ratio: 0.3264178234494074 },
                    'LADDER': { name: 'B/T사다리', spec: '400*1700', ratio: 0.015651648280477538 },
                    'OPENABLE-DECK': { name: '개폐형발판', spec: '500*1829', ratio: 0.015651648280477538 }
                }
            },
            'finish-general': {
                name: '마감용 비계 (일반건축)',
                description: '공장 및 오피스텔 / 10m 이상 / 400발판 2장 위주',
                materials: {
                    'SP-3800': { name: '수직재', spec: 'SP-3800', ratio: 0.2296402629783713 },
                    'SP-1900': { name: '수직재', spec: 'SP-1900', ratio: 0.09306220742754621 },
                    'SP-950': { name: '수직재', spec: 'SP-950', ratio: 0.06030511180988463 },
                    'SP-475': { name: '수직재', spec: 'SP-475', ratio: 0.022479181212854006 },
                    'SP-275': { name: '수직재', spec: 'SP-275', ratio: 0.00520907942543854 },
                    'SH-1829': { name: '수평재', spec: 'SH-1829', ratio: 1.1286071622838607 },
                    'SH-1524': { name: '수평재', spec: 'SH-1524', ratio: 0.09169983280858536 },
                    'SH-1219': { name: '수평재', spec: 'SH-1219', ratio: 0.11357796639542724 },
                    'SH-914': { name: '수평재', spec: 'SH-914', ratio: 0.4490226464728021 },
                    'SH-610': { name: '수평재', spec: 'SH-610', ratio: 0.04201322905824853 },
                    'SH-305': { name: '수평재', spec: 'SH-305', ratio: 0.02656630506973655 },
                    'JACK': { name: '하부자키', spec: '고정', ratio: 0.058842562586588425 },
                    'BRACE': { name: '대각가새', spec: '1900*1829', ratio: 0.03806634964743548 },
                    'STEP': { name: '계단발판', spec: '510*2637', ratio: 0.005449498475843396 },
                    'HK-2434': { name: '비계버팀대', spec: 'HK-2434', ratio: 0.023841555831814853 },
                    'HK-3352': { name: '비계버팀대', spec: 'HK-3352', ratio: 0.035261460726045496 },
                    'HK-4872': { name: '비계버팀대', spec: 'HK-4872', ratio: 0.0 },
                    'DECK-400-610': { name: '안전발판', spec: '400*610', ratio: 0.0010017460433535653 },
                    'DECK-400-914': { name: '안전발판', spec: '400*914', ratio: 0.03746530202142334 },
                    'DECK-400-1219': { name: '안전발판', spec: '400*1219', ratio: 0.03724491789188556 },
                    'DECK-400-1524': { name: '안전발판', spec: '400*1524', ratio: 0.04051060999321818 },
                    'DECK-400-1829': { name: '안전발판', spec: '400*1829', ratio: 0.42281696997867285 },
                    'DECK-500-914': { name: '안전발판', spec: '500*914', ratio: 0.0006010476260121392 },
                    'DECK-500-1219': { name: '안전발판', spec: '500*1219', ratio: 0.0006811873094804245 },
                    'DECK-500-1829': { name: '안전발판', spec: '500*1829', ratio: 0.021797993903373582 }
                }
            }
        };
        
        // 기본 단가 데이터
        const defaultPrices = {
            'SP-3800': { basic: 12000, daily: 400 },
            'SP-1900': { basic: 6000, daily: 200 },
            'SP-950': { basic: 3000, daily: 100 },
            'SP-475': { basic: 1500, daily: 50 },
            'SP-275': { basic: 1000, daily: 30 },
            'SH-1829': { basic: 4000, daily: 130 },
            'SH-1524': { basic: 3500, daily: 110 },
            'SH-1219': { basic: 3000, daily: 100 },
            'SH-914': { basic: 2500, daily: 80 },
            'SH-610': { basic: 2000, daily: 60 },
            'SH-305': { basic: 1500, daily: 50 },
            'JACK': { basic: 3000, daily: 100 },
            'BRACE': { basic: 4500, daily: 150 },
            'STEP': { basic: 15000, daily: 500 },
            'HK-2434': { basic: 8000, daily: 250 },
            'HK-3352': { basic: 10000, daily: 330 },
            'HK-4872': { basic: 15000, daily: 500 },
            'DECK-400-610': { basic: 2500, daily: 80 },
            'DECK-400-914': { basic: 3500, daily: 110 },
            'DECK-400-1219': { basic: 4500, daily: 150 },
            'DECK-400-1524': { basic: 5500, daily: 180 },
            'DECK-400-1829': { basic: 6500, daily: 210 },
            'DECK-500-610': { basic: 3000, daily: 100 },
            'DECK-500-914': { basic: 4000, daily: 130 },
            'DECK-500-1219': { basic: 5000, daily: 160 },
            'DECK-500-1524': { basic: 6000, daily: 200 },
            'DECK-500-1829': { basic: 7000, daily: 230 },
            'LADDER': { basic: 20000, daily: 650 },
            'OPENABLE-DECK': { basic: 15000, daily: 500 }
        };
        
        // 슬라이더 이벤트 리스너
        document.getElementById('safetyRate').addEventListener('input', function() {
            document.getElementById('safetyRateDisplay').textContent = this.value;
        });
        
        document.getElementById('reuseRate').addEventListener('input', function() {
            document.getElementById('reuseRateDisplay').textContent = this.value;
        });
        
        // 구조 타입 선택
        function selectStructureType(type, element) {
            currentType = type;
            document.querySelectorAll('.structure-type-card').forEach(card => {
                card.classList.remove('active');
            });
            element.classList.add('active');
        }
        
        // 물량 계산
        function calculateQuantity() {
            const area = parseFloat(document.getElementById('area').value);
            const safetyRate = parseFloat(document.getElementById('safetyRate').value) / 100;
            const reuseRate = parseFloat(document.getElementById('reuseRate').value) / 100;
            
            if (!area || area <= 0) {
                alert('설치 면적을 올바르게 입력해주세요.');
                return;
            }
            
            const scaffoldInfo = scaffoldData[currentType];
            if (!scaffoldInfo) {
                alert('선택된 구조 타입이 올바르지 않습니다.');
                return;
            }
            
            // 재료별 수량 계산
            calculatedMaterials = {};
            let verticalTotal = 0;
            let horizontalTotal = 0;
            let jackTotal = 0;
            let deckTotal = 0;
            
            for (const [key, material] of Object.entries(scaffoldInfo.materials)) {
                const basicQty = Math.round(area * material.ratio);
                const safetyQty = Math.round(basicQty * (1 + safetyRate));
                const finalQty = Math.round(safetyQty * (1 - reuseRate));
                
                calculatedMaterials[key] = {
                    ...material,
                    basicQty: basicQty,
                    finalQty: finalQty
                };
                
                // 카테고리별 합계
                if (key.startsWith('SP-')) {
                    verticalTotal += finalQty;
                } else if (key.startsWith('SH-')) {
                    horizontalTotal += finalQty;
                } else if (key === 'JACK') {
                    jackTotal += finalQty;
                } else if (key.includes('DECK')) {
                    deckTotal += finalQty;
                }
            }
            
            // 결과 표시
            document.getElementById('verticalCount').textContent = verticalTotal.toLocaleString();
            document.getElementById('horizontalCount').textContent = horizontalTotal.toLocaleString();
            document.getElementById('jackCount').textContent = jackTotal.toLocaleString();
            document.getElementById('deckCount').textContent = deckTotal.toLocaleString();
            
            // 정보 업데이트
            document.getElementById('resultInfo').textContent = `${scaffoldInfo.description}`;
            document.getElementById('totalArea').textContent = `${area.toLocaleString()} ㎡`;
            document.getElementById('appliedSafetyRate').textContent = `${(safetyRate * 100).toFixed(0)}%`;
            document.getElementById('appliedReuseRate').textContent = `${(reuseRate * 100).toFixed(0)}%`;
            document.getElementById('appliedRatio').textContent = `${((1 + safetyRate) * (1 - reuseRate) * 100).toFixed(0)}%`;
            
            // 상세 테이블 업데이트
            updateDetailTable();
            
            // 단가 입력 그리드 생성
            createPriceInputGrid();
            
            // 결과 섹션 표시
            document.getElementById('resultSection').style.display = 'block';
            
            // 스크롤
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        // 상세 테이블 업데이트
        function updateDetailTable() {
            const tbody = document.getElementById('detailTableBody');
            tbody.innerHTML = '';
            
            // 카테고리별로 그룹화
            const categories = {
                '수직재': [],
                '수평재': [],
                '하부자키': [],
                '대각가새': [],
                '계단발판': [],
                '비계버팀대': [],
                '안전발판': [],
                'B/T사다리': [],
                '개폐형발판': []
            };
            
            for (const [key, material] of Object.entries(calculatedMaterials)) {
                const category = material.name;
                if (categories[category]) {
                    categories[category].push({ key, ...material });
                }
            }
            
            // 테이블에 추가
            for (const [category, items] of Object.entries(categories)) {
                if (items.length === 0) continue;
                
                // 카테고리 헤더
                const headerRow = tbody.insertRow();
                headerRow.innerHTML = `<td colspan="7" style="background: #e8f0ff; font-weight: bold; color: #1e3c72;">${category}</td>`;
                
                // 아이템 행
                items.forEach(item => {
                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td>${item.name}</td>
                        <td>${item.spec}</td>
                        <td>${item.basicQty.toLocaleString()}</td>
                        <td>${item.finalQty.toLocaleString()}</td>
                        <td class="price-column" style="display: none;">-</td>
                        <td class="price-column" style="display: none;">-</td>
                        <td class="price-column" style="display: none;">-</td>
                    `;
                    row.dataset.key = item.key;
                });
            }
        }
        
        // 단가 입력 그리드 생성
        function createPriceInputGrid() {
            const grid = document.getElementById('priceInputGrid');
            grid.innerHTML = '';
            
            for (const [key, material] of Object.entries(calculatedMaterials)) {
                if (material.finalQty === 0) continue;
                
                const item = document.createElement('div');
                item.className = 'price-input-item';
                
                const savedPrice = savedPriceInputs[key] || defaultPrices[key] || { basic: 0, daily: 0 };
                
                item.innerHTML = `
                    <label title="${material.name} ${material.spec}">${material.name} ${material.spec}</label>
                    <input type="number" id="basic-${key}" placeholder="기본료" value="${savedPrice.basic}" min="0" step="100">
                    <input type="number" id="daily-${key}" placeholder="일단가" value="${savedPrice.daily}" min="0" step="10">
                `;
                
                grid.appendChild(item);
            }
        }
        
        // 단가 섹션 토글
        function togglePriceSection() {
            const container = document.getElementById('priceInputContainer');
            container.style.display = container.style.display === 'none' ? 'block' : 'none';
        }
        
        // 금액 계산
        function calculatePrice() {
            const usageDays = parseInt(document.getElementById('usageDays').value) || 30;
            let totalPrice = 0;
            
            // 각 자재별 금액 계산
            for (const [key, material] of Object.entries(calculatedMaterials)) {
                if (material.finalQty === 0) continue;
                
                const basicPrice = parseInt(document.getElementById(`basic-${key}`)?.value) || 0;
                const dailyPrice = parseInt(document.getElementById(`daily-${key}`)?.value) || 0;
                
                // 단가 저장
                savedPriceInputs[key] = { basic: basicPrice, daily: dailyPrice };
                
                const itemTotal = (basicPrice + (dailyPrice * usageDays)) * material.finalQty;
                totalPrice += itemTotal;
                
                // 테이블 업데이트
                const row = document.querySelector(`tr[data-key="${key}"]`);
                if (row) {
                    const cells = row.getElementsByTagName('td');
                    cells[4].textContent = basicPrice.toLocaleString();
                    cells[5].textContent = dailyPrice.toLocaleString();
                    cells[6].textContent = itemTotal.toLocaleString();
                }
            }
            
            // 총계 표시
            document.getElementById('totalPrice').textContent = `₩ ${totalPrice.toLocaleString()}`;
            const area = parseFloat(document.getElementById('area').value);
            const pricePerM2 = Math.round(totalPrice / area);
            document.getElementById('pricePerM2').textContent = `₩ ${pricePerM2.toLocaleString()}`;
            
            // 가격 관련 요소 표시
            document.querySelectorAll('.price-column').forEach(el => el.style.display = '');
            document.querySelectorAll('.price-summary').forEach(el => el.style.display = '');
        }
        
        // 단가 데이터 저장
        function savePriceData() {
            const priceData = {};
            
            for (const key of Object.keys(calculatedMaterials)) {
                const basicInput = document.getElementById(`basic-${key}`);
                const dailyInput = document.getElementById(`daily-${key}`);
                
                if (basicInput && dailyInput) {
                    priceData[key] = {
                        basic: parseInt(basicInput.value) || 0,
                        daily: parseInt(dailyInput.value) || 0
                    };
                }
            }
            
            localStorage.setItem('scaffoldPriceData', JSON.stringify(priceData));
            alert('단가 정보가 저장되었습니다.');
        }
        
        // 단가 데이터 불러오기
        function loadPriceData() {
            const saved = localStorage.getItem('scaffoldPriceData');
            if (!saved) {
                alert('저장된 단가 정보가 없습니다.');
                return;
            }
            
            const priceData = JSON.parse(saved);
            savedPriceInputs = priceData;
            
            for (const [key, prices] of Object.entries(priceData)) {
                const basicInput = document.getElementById(`basic-${key}`);
                const dailyInput = document.getElementById(`daily-${key}`);
                
                if (basicInput) basicInput.value = prices.basic;
                if (dailyInput) dailyInput.value = prices.daily;
            }
            
            alert('단가 정보를 불러왔습니다.');
        }
        
        // 견적서 생성
        function generateQuotation() {
            const companyName = prompt('업체명을 입력하세요:', '');
            if (!companyName) return;
            
            const projectName = prompt('공사명을 입력하세요:', '');
            if (!projectName) return;
            
            // 비고란 기본 내용
            const defaultNotes = `- 부가세 별도
- 자재는 일단가 청구조건이며, 시험에 필요한 자재비 및 경비 별도 조건
- 물량은 산출 기준 : ${scaffoldData[currentType].description}
- 물량은 변경될 수 있으며, 실제 설치 물량으로 정산 조건
- 운반비 왕복 조건이며, 11톤 미만 출고시 청구조건`;
            
            // 비고란 내용 입력받기
            const notes = prompt('비고란 내용을 입력하세요 (각 항목은 줄바꿈으로 구분):', defaultNotes);
            
            const quotationWindow = window.open('', '_blank', 'width=900,height=1200');
            const area = parseFloat(document.getElementById('area').value);
            const today = new Date();
            const todayStr = today.getFullYear() + '년 ' + (today.getMonth() + 1) + '월 ' + today.getDate() + '일';
            const usageDays = parseInt(document.getElementById('usageDays').value) || 30;
            
            let totalAmount = 0;
            
            // 각 자재별 금액 계산
            for (const [key, material] of Object.entries(calculatedMaterials)) {
                if (material.finalQty === 0) continue;
                const price = savedPriceInputs[key] || defaultPrices[key] || { basic: 0, daily: 0 };
                totalAmount += (price.basic + (price.daily * usageDays)) * material.finalQty;
            }
            
            let quotationHTML = `
                <!DOCTYPE html>
                <html lang="ko">
                <head>
                    <meta charset="UTF-8">
                    <title>견적서 - ${companyName}</title>
                    <style>
                        @media print {
                            body { margin: 0; }
                            .page-break { page-break-after: always; }
                        }
                        body { 
                            font-family: 'Malgun Gothic', '맑은 고딕', sans-serif; 
                            margin: 0;
                            padding: 20px;
                            background: white;
                        }
                        .quotation-container { 
                            max-width: 900px; 
                            margin: 0 auto; 
                            background: white;
                            padding: 40px;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 50px;
                        }
                        .title { 
                            font-size: 40px; 
                            font-weight: bold; 
                            margin-bottom: 40px;
                            letter-spacing: 20px;
                        }
                        .to-company {
                            font-size: 20px;
                            font-weight: bold;
                            margin-bottom: 20px;
                        }
                        .summary {
                            background: #f5f5f5;
                            padding: 20px;
                            margin-bottom: 30px;
                            border: 1px solid #ddd;
                        }
                        .summary-grid {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 10px;
                        }
                        .summary-item {
                            display: flex;
                            justify-content: space-between;
                            padding: 5px 0;
                        }
                        .summary-label {
                            font-weight: bold;
                        }
                        .amount-box {
                            text-align: center;
                            margin: 30px 0;
                            padding: 20px;
                            border: 2px solid #333;
                        }
                        .amount-label {
                            font-size: 18px;
                            margin-bottom: 10px;
                        }
                        .amount-value {
                            font-size: 28px;
                            font-weight: bold;
                            color: #2a5298;
                        }
                        .main-table { 
                            width: 100%; 
                            border-collapse: collapse; 
                            margin-bottom: 30px; 
                        }
                        .main-table th { 
                            background: #e8e8e8; 
                            padding: 10px; 
                            text-align: center; 
                            font-weight: bold;
                            border: 1px solid #999;
                            font-size: 14px;
                        }
                        .main-table td { 
                            padding: 8px; 
                            border: 1px solid #ccc; 
                            text-align: center;
                            font-size: 13px;
                        }
                        .main-table .category {
                            background: #f5f5f5;
                            font-weight: bold;
                            text-align: left;
                            padding-left: 15px;
                        }
                        .notes {
                            margin-top: 30px;
                            padding: 20px;
                            background: #f9f9f9;
                            border: 1px solid #ddd;
                        }
                        .notes h4 {
                            margin-bottom: 10px;
                            color: #333;
                        }
                        .notes ul {
                            margin: 0;
                            padding-left: 20px;
                        }
                        .notes li {
                            margin: 5px 0;
                            font-size: 13px;
                            color: #555;
                        }
                        .footer {
                            margin-top: 50px;
                            text-align: right;
                        }
                        .text-right { text-align: right !important; }
                        .text-left { text-align: left !important; }
                        .text-center { text-align: center !important; }
                        .edit-notes {
                            background: #fffbf0;
                            border: 1px dashed #ccc;
                            padding: 10px;
                            margin-bottom: 20px;
                            font-size: 12px;
                            color: #666;
                            text-align: center;
                        }
                    </style>
                </head>
                <body>
                    <div class="quotation-container">
                        <div class="header">
                            <h1 class="title">견 적 서</h1>
                        </div>
                        
                        <div class="to-company">${companyName} 귀하</div>
                        
                        <p style="font-size: 16px; margin-bottom: 30px;">아래와 같이 견적 합니다.</p>
                        
                        <div class="amount-box">
                            <div class="amount-label">금 액</div>
                            <div class="amount-value">₩ ${totalAmount.toLocaleString()}</div>
                        </div>
                        
                        <div class="summary">
                            <div class="summary-grid">
                                <div class="summary-item">
                                    <span class="summary-label">공 사 명 :</span>
                                    <span>${projectName}</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">납 기 :</span>
                                    <span>추후 협의</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">결제조건 :</span>
                                    <span>정기 결제</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">인도장소 :</span>
                                    <span>추후 협의</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">견적유효 :</span>
                                    <span>견적일로부터 10일</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">견 적 일 :</span>
                                    <span>${todayStr}</span>
                                </div>
                            </div>
                        </div>
                        
                        <table class="main-table">
                            <thead>
                                <tr>
                                    <th style="width: 25%;">품 명<br>ITEM</th>
                                    <th style="width: 20%;">규 격<br>SIZE</th>
                                    <th style="width: 10%;">단위<br>UNIT</th>
                                    <th style="width: 10%;">수량<br>Q'TY</th>
                                    <th style="width: 8%;">사용일<br>DAY</th>
                                    <th style="width: 12%;">단가<br>PRICE</th>
                                    <th style="width: 15%;">금액<br>AMOUNT</th>
                                </tr>
                            </thead>
                            <tbody>
            `;
            
            // 카테고리별로 자재 그룹화
            const categories = {
                '수직재': [],
                '수평재': [],
                '하부자키': [],
                '대각가새': [],
                '계단발판': [],
                '비계버팀대': [],
                '안전발판': [],
                'B/T사다리': [],
                '개폐형발판': []
            };
            
            for (const [key, material] of Object.entries(calculatedMaterials)) {
                if (material.finalQty === 0) continue;
                const category = material.name;
                if (categories[category]) {
                    categories[category].push({ key, ...material });
                }
            }
            
            // 테이블에 자재 추가
            for (const [category, items] of Object.entries(categories)) {
                if (items.length === 0) continue;
                
                // 카테고리 헤더
                quotationHTML += `
                    <tr>
                        <td colspan="7" class="category">${category}</td>
                    </tr>
                `;
                
                // 각 아이템
                items.forEach(item => {
                    const price = savedPriceInputs[item.key] || defaultPrices[item.key] || { basic: 0, daily: 0 };
                    const unitPrice = price.basic + (price.daily * usageDays);
                    const itemTotal = unitPrice * item.finalQty;
                    
                    quotationHTML += `
                        <tr>
                            <td class="text-left" style="padding-left: 20px;">${item.name}</td>
                            <td>${item.spec}</td>
                            <td>EA</td>
                            <td>${item.finalQty.toLocaleString()}</td>
                            <td>${usageDays}</td>
                            <td class="text-right">${unitPrice.toLocaleString()}</td>
                            <td class="text-right">${itemTotal.toLocaleString()}</td>
                        </tr>
                    `;
                });
            }
            
            quotationHTML += `
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="6" class="text-center" style="font-weight: bold; background: #f0f0f0;">합 계</td>
                                    <td class="text-right" style="font-weight: bold; background: #f0f0f0;">${totalAmount.toLocaleString()}</td>
                                </tr>
                            </tfoot>
                        </table>
                        
                        <div class="notes">
                            <h4>[ 비 고 ]</h4>
                            <ul>
            `;
            
            // 비고란 내용 처리
            if (notes) {
                const noteLines = notes.split('\n');
                noteLines.forEach(line => {
                    if (line.trim()) {
                        // - 로 시작하지 않으면 추가
                        const formattedLine = line.trim().startsWith('-') ? line.trim().substring(1).trim() : line.trim();
                        quotationHTML += `<li>${formattedLine}</li>\n`;
                    }
                });
            }
            
            quotationHTML += `
                            </ul>
                        </div>
                        
                        <div class="edit-notes no-print">
                            ※ 인쇄 후 비고란에 추가 내용을 수기로 작성하실 수 있습니다.
                        </div>
                        
                        <div class="footer">
                            <p style="font-size: 16px;">위와 같이 견적합니다.</p>
                        </div>
                    </div>
                </body>
                </html>
            `;
            
            quotationWindow.document.write(quotationHTML);
            quotationWindow.document.close();
        }
        
        // 엑셀 내보내기
        function exportToExcel() {
            let csvContent = "data:text/csv;charset=utf-8,\uFEFF";
            csvContent += "자재명,규격,기본수량,최종수량,기본료,일단가,총금액\n";
            
            for (const [key, material] of Object.entries(calculatedMaterials)) {
                const price = savedPriceInputs[key] || defaultPrices[key] || { basic: 0, daily: 0 };
                const usageDays = parseInt(document.getElementById('usageDays').value) || 30;
                const itemTotal = (price.basic + (price.daily * usageDays)) * material.finalQty;
                
                csvContent += `"${material.name}","${material.spec}",${material.basicQty},${material.finalQty},${price.basic},${price.daily},${itemTotal}\n`;
            }
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `비계물량산출_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // 프로젝트 저장
        function saveCurrentProject() {
            const projectName = prompt('프로젝트명을 입력하세요:', '');
            if (!projectName) return;
            
            const projectData = {
                name: projectName,
                date: new Date().toISOString(),
                type: currentType,
                area: document.getElementById('area').value,
                safetyRate: document.getElementById('safetyRate').value,
                reuseRate: document.getElementById('reuseRate').value,
                materials: calculatedMaterials,
                prices: savedPriceInputs,
                usageDays: document.getElementById('usageDays').value
            };
            
            // 기존 프로젝트 목록 가져오기
            let projects = JSON.parse(localStorage.getItem('scaffoldProjects') || '[]');
            projects.push(projectData);
            
            localStorage.setItem('scaffoldProjects', JSON.stringify(projects));
            alert('프로젝트가 저장되었습니다.');
        }
        
        // 저장된 프로젝트 목록 표시
        function showProjectList() {
            const projects = JSON.parse(localStorage.getItem('scaffoldProjects') || '[]');
            if (projects.length === 0) {
                alert('저장된 프로젝트가 없습니다.');
                return;
            }
            
            let listHTML = '<h3>저장된 프로젝트 목록</h3><ul>';
            projects.forEach((project, index) => {
                const date = new Date(project.date).toLocaleDateString('ko-KR');
                listHTML += `<li>${project.name} (${date}) <button onclick="loadProject(${index})">불러오기</button> <button onclick="deleteProject(${index})">삭제</button></li>`;
            });
            listHTML += '</ul>';
            
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="close-modal" onclick="this.parentElement.parentElement.remove()">×</button>
                    ${listHTML}
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        // 프로젝트 불러오기
        function loadProject(index) {
            const projects = JSON.parse(localStorage.getItem('scaffoldProjects') || '[]');
            const project = projects[index];
            
            if (!project) return;
            
            // 값 설정
            document.getElementById('area').value = project.area;
            document.getElementById('safetyRate').value = project.safetyRate;
            document.getElementById('reuseRate').value = project.reuseRate;
            document.getElementById('safetyRateDisplay').textContent = project.safetyRate;
            document.getElementById('reuseRateDisplay').textContent = project.reuseRate;
            
            // 구조 타입 선택
            const typeCard = document.querySelector(`[onclick*="${project.type}"]`);
            if (typeCard) {
                selectStructureType(project.type, typeCard);
            }
            
            // 저장된 단가 복원
            savedPriceInputs = project.prices || {};
            
            // 계산 실행
            calculateQuantity();
            
            // 사용일수 설정
            if (project.usageDays) {
                document.getElementById('usageDays').value = project.usageDays;
            }
            
            // 모달 닫기
            document.querySelector('.modal')?.remove();
            
            alert('프로젝트를 불러왔습니다.');
        }
        
        // 프로젝트 삭제
        function deleteProject(index) {
            if (!confirm('정말 삭제하시겠습니까?')) return;
            
            let projects = JSON.parse(localStorage.getItem('scaffoldProjects') || '[]');
            projects.splice(index, 1);
            localStorage.setItem('scaffoldProjects', JSON.stringify(projects));
            
            // 목록 갱신
            document.querySelector('.modal')?.remove();
            showProjectList();
        }
        
        // 초기화
        function resetCalculator() {
            if (!confirm('모든 데이터를 초기화하시겠습니까?')) return;
            
            document.getElementById('area').value = '1000';
            document.getElementById('safetyRate').value = '5';
            document.getElementById('reuseRate').value = '0';
            document.getElementById('safetyRateDisplay').textContent = '5';
            document.getElementById('reuseRateDisplay').textContent = '0';
            document.getElementById('usageDays').value = '30';
            
            savedPriceInputs = {};
            
            // 첫 번째 구조 타입 선택
            const firstCard = document.querySelector('.structure-type-card');
            selectStructureType('general-frame', firstCard);
            
            // 결과 섹션 숨기기
            document.getElementById('resultSection').style.display = 'none';
            
            alert('초기화되었습니다.');
        }
        
        // 페이지 로드 시 초기 설정
        window.onload = function() {
            // 기본값 설정
            document.getElementById('area').value = '1000';
            document.getElementById('safetyRate').value = '5';
            document.getElementById('reuseRate').value = '0';
            
            // 개발자 도구 감지
            let devtools = {open: false, orientation: null};
            setInterval(function() {
                if (window.outerHeight - window.innerHeight > 200 || 
                    window.outerWidth - window.innerWidth > 200) {
                    if (!devtools.open) {
                        devtools.open = true;
                        console.clear();
                        console.log('%c보안 경고!', 'color: red; font-size: 30px; font-weight: bold;');
                        console.log('%c무단 접근이 감지되었습니다.', 'color: red; font-size: 16px;');
                    }
                }
            }, 500);
        };
    </script>
</body>
</html>